;epub360.PlayerPlugins.push({config:{type:"ButtonGroup",template:"others"},render:function(){},immediateRender:function(){},setOtherDisplay:function(){},onPlay:function(){this.initRuntimeData(),0==this.model.attributes.iDetail.type&&this.initSingleSelectHandler()},otherOnShow:function(){},otherOnHide:function(){},onStop:function(){},initRuntimeData:function(){var o=o||this;if(o.runtimeCache)var t=o.runtimeCache;else t=o.runtimeCache={};t.groupValue=null;var e=[],i=this.model.layer_id,n=this.model.attributes.iDetail;if(i){var u=this.model.page,a=u?u.iOverlaylist.models:[];e=n.buttons.map(function(e){return a.find(function(t){return t.id==e.id})})}else e=n.buttons.map(function(t){return interaction_view.getPageElement(t.page_id,t.id)});e=e.filter(function(t){return t}),t.buttonModelList||(t.buttonModelList=e),t.indexMap=n.buttons.map(function(t){return o.obj2str(t,["id","page_id"])}),t.checkedModelList||(t.checkedModelList=this.model.attributes.iDetail.checked.map(function(t){return interaction_view.getPageElement(t.page_id,t.id)||interaction_view.getLayerElement(t.page_id,t.id)}).filter(function(t){return t})),t.buttonModelList.forEach(function(t){t.iview.switchStatus("normal")}),t.checkedModelList.forEach(function(t){if(t.iview)t.iview.switchStatus("active");else{var e=o.model.layer_id,i=$("[data-id="+e+"]").find("#"+t.id).find(".iconActive"),n=$("[data-id="+e+"]").find("#"+t.id).find(".iconNormal");i.show(),n.hide()}})},obj2str:function(e,t){return t.map(function(t){return e[t]}).join("^_^")},isSameModel:function(t,e,i){i=i||["id","iPageId"];var n=this.obj2str;return n(t,i)==n(e,i)},someItemChanged:function(t){var e=e||t.groupView||this;e.runtimeCache.groupValue=null,e.isSameModel(t.model,e.runtimeCache.checkedModelList[0]||{})?t.switchStatus("active"):(e.runtimeCache.buttonModelList.forEach(function(t){t.iview.switchStatus("normal")}),t.switchStatus("active"),e.runtimeCache.checkedModelList=[t.model]),interaction_view.events.onButtonGroupSelectEnd(e,{})},initSingleSelectHandler:function(){var e=e||this;this.runtimeCache.buttonModelList.forEach(function(t){t.iview.setAsGroupElement(e)}),window.globalBus.off("buttonGroupClick:ButtonGroup"),window.globalBus.on("buttonGroupClick:ButtonGroup",e.someItemChanged)},getButtonGroupValue:function(){var t,e=e||this;return e.runtimeCache?null!==e.runtimeCache.groupValue?e.runtimeCache.groupValue:(t=e.runtimeCache.checkedModelList.length?e.runtimeCache.checkedModelList.map(function(t){return e.getItemValue(t)}).join(","):"",e.runtimeCache.groupValue=t):""},getItemValue:function(e){var t=t||this,i=t.model.attributes.iDetail.buttons[t.runtimeCache.indexMap.indexOf(e.layer_id?t.obj2str(e,["id","layer_id"]):t.obj2str(e,["id","iPageId"]))],n=""+(i.value||"");return t.obj2str(e,["id","iPageId"])!=t.obj2str(i,["id","page_id"])&&t.model.attributes.iDetail.buttons.forEach(function(t){e.id==t.id&&e.iPageId==t.page_id&&(n=""+t.value)}),n}});;;epub360.PlayerPlugins.push({type:"action",config:{type:"onSelectEnd",func:function(e,i){var n={page_id:e.view.page_id,overlay_id:e.view.overlay_id,layer_id:e.view.layer_id,func:e.func,overlaymodel:e.view.overlaymodel,d:e,type:"onSelectEnd"};i.init&&interaction_view.events.buttonGroupSelectEndEvents.push(n)}}});;